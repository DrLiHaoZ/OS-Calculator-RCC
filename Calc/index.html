<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>test</title>
    <!-- Bootstrap -->
	<link href="jQueryAssets/jquery.ui.core.min.css" rel="stylesheet" type="text/css">
	<link href="jQueryAssets/jquery.ui.theme.min.css" rel="stylesheet" type="text/css">
	<link href="jQueryAssets/jquery.ui.slider.min.css" rel="stylesheet" type="text/css">
	<link href="jQueryAssets/jquery.ui.button.min.css" rel="stylesheet" type="text/css">
	<!-- <link href="css/bootstrap.css" rel="stylesheet"> -->
	<link href="css/bootstrap-3.3.7.css" rel="stylesheet" type="text/css">
	<script src="jQueryAssets/jquery-1.11.1.min.js"></script>
	<script src="jQueryAssets/jquery.ui-1.10.4.slider.min.js"></script>
	<script src="jQueryAssets/jquery.ui-1.10.4.button.min.js"></script>
	<script src="jQueryAssets/jquery-ui-effects.custom.min.js"></script>
	<script>
function MM_DW_effectHighlight(obj,method,effect,color,speed)
{
    obj[method](effect, {color:color}, speed);
}
		
    </script>
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		
  </head>
  <body style="padding-top: 70px">
  <div class="container" >
  

  
  <div class="row">
    <div class="col-md-9">
    	
   	  <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon" >Age</span></div>
    	  <div class="col-md-10"><input type="text" class="form-control" placeholder="please input the age of patients" id = "age"  onkeyup="value=value.replace(/[^\d\.]/g,'')"></div>
  	  </div>
  	  
      
<div class="row">
   	    <div class="col-md-2"><span class="input-group-addon">Marital Status</span></div>
   	    <div class="col-md-10"><div class="btn-group" role="group">
            <button type="button" class="btn btn-default btn-primary " value="10">Married</button>
         	<button type="button" class="btn btn-default btn-primary " value="16">Single</button>
         	<button type="button" class="btn btn-default btn-primary " value="19">Divorced</button>
         	<button type="button" class="btn btn-default btn-primary " value="21">Widowed</button>
         	<button type="button" class="btn btn-default btn-primary " value="0">Unknown</button>
        </div></div>
  	  </div>

  	  
      <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon">Race</span></div>
    	  <div class="col-md-10"><div class="btn-group" role="group">
          <button type="button" class="btn btn-default btn-primary" value="2">White</button>
          <button type="button" class="btn btn-default btn-primary" value="7">Black</button>
          <button type="button" class="btn btn-default btn-primary" value="0">Other</button>
        </div></div>
  	  </div>
  	  
  	    <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon">Histology</span></div>
    	  <div class="col-md-10"><div class="btn-group" role="group">
          <button type="button" class="btn btn-default btn-primary" value="20">Clear Cell</button>
          <button type="button" class="btn btn-default btn-primary" value="28">Papillary</button>
          <button type="button" class="btn btn-default btn-primary" value="0">Chromophobe</button>
          <button type="button" class="btn btn-default btn-primary" value="57">Sarcomatoid</button>
          <button type="button" class="btn btn-default btn-primary" value="49">Other</button>
          <button type="button" class="btn btn-default btn-primary" value="31">RCC*</button>
        </div></div>
  	  </div>
  	  
  	  <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon">Grade</span></div>
    	  <div class="col-md-10"><div class="btn-group" role="group">
          <button type="button" class="btn btn-default btn-primary" value="0">I</button>
          <button type="button" class="btn btn-default btn-primary" value="6">II</button>
          <button type="button" class="btn btn-default btn-primary" value="23">III</button>
          <button type="button" class="btn btn-default btn-primary" value="41">IV</button>
          <button type="button" class="btn btn-default btn-primary" value="21">Unknown</button>
        </div></div>
  	  </div>
  	  
  	   <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon">Tumor Size</span></div>
    	  <div class="col-md-10"><input type="text" class="form-control" placeholder="Please input the tumor size (cm)"  onkeyup="value=value.replace(/[^\d\.]/g,'')" id = "tumorsize"></div>
  	  </div>
  	  
  	   <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon">Node Involovement</span></div>
    	  <div class="col-md-10"><div class="btn-group" role="group">
          <button type="button" class="btn btn-default btn-primary" value="24">Yes</button>
          <button type="button" class="btn btn-default btn-primary" value="0">No</button>
        </div></div>
  	  </div>
  	    
  	  <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon">Metastasis</span></div>
    	  <div class="col-md-10"><div class="btn-group" role="group">
          <button type="button" class="btn btn-default btn-primary" value="0">No</button>
          <button type="button" class="btn btn-default btn-primary" value="44">Bone</button>
          <button type="button" class="btn btn-default btn-primary" value="56">Liver</button>
          <button type="button" class="btn btn-default btn-primary" value="46">Lung</button>
          <button type="button" class="btn btn-default btn-primary" value="48">Brain</button>
          <button type="button" class="btn btn-default btn-primary" value="37">Other</button>
          <button type="button" class="btn btn-default btn-primary" value="66">Multiple</button>
        </div></div>
  	  </div>
  	  
  	  <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon">Surgery</span></div>
    	  <div class="col-md-10"><div class="btn-group" role="group">
          <button type="button" class="btn btn-default btn-primary" value="52">No*</button>
          <button type="button" class="btn btn-default btn-primary" value="14">Partial ureterectomy</button>
          <button type="button" class="btn btn-default btn-primary" value="0">Nephroureterectomy</button>
          <button type="button" class="btn btn-default btn-primary" value="11">Radical nephrectomy</button>
        </div></div>
  	  </div>
 		 <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon">Radiation</span></div>
    	  <div class="col-md-10"><div class="btn-group" role="group">
          <button type="button" class="btn btn-default btn-primary" value="0">No</button>
          <button type="button" class="btn btn-default btn-primary" value="9">Yes</button>
        </div></div>
  	  </div>
 	    
  	    <div class="row">
    	  <div class="col-md-2"><span class="input-group-addon">Chemotherapy</span></div>
    	  <div class="col-md-10"><div class="btn-group" role="group">
          <button type="button" class="btn btn-default btn-primary" value="7">No/Unknown</button>
          <button type="button" class="btn btn-default btn-primary" value="0">Yes</button>
        </div></div>
  	  </div>
    </div>
    <div class="col-md-3">
      
   		
     		  <div class="panel panel-default panel-info" style="display: none" id = "show">
      		  <div class="panel-heading">
      		    <h3 class="panel-title">RESULTS</h3>
	      </div>
     		  <div class="panel-body">Total Score:<span id = "ts"></span></div>
      		  <div class="panel-body">1-year OS:<span id = "1year"></span></div>
      		  <div class="panel-footer">3-year OS:<span id = "3year"></span></div>
	    </div>
      
    </div>

  </div>
  <div class="row">
    <div class="col-md-4"></div>
    
    <div class="col-md-4">
      <button type="button" id = "submission" class="btn btn-success">Submit</button></div>
    
    <div class="col-md-4"></div>
  </div>
  </div>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) --> 
  <script src="js/jquery-1.11.3.min.js"></script> <!-- Include all compiled plugins (below), or include individual files as needed --> 
  <!-- <script src="js/bootstrap.js"></script> -->
  <script src="js/bootstrap-3.3.7.js"></script>
<script type="text/javascript">
$(function() {
	//button只能选一个
	$( "button" ).not("#submission").click(function(){
		$(this).parent().children().attr('class','btn btn-default btn-primary');
		$(this).attr('class','btn btn-default btn-primary active');
	}); 
	//提交函数
	$("#submission").click(function(){
		//$("#result").text(  parseFloat($("#age").val()) + parseFloat($("#tumorsize").val()) ); 
		total_score = total();
		surv_1 = OS1(total_score);
		surv_3 = OS3(total_score);
		//$("#result").text(total_score+" 1year OS:" + surv_1 + ' 3year OS:' + surv_3);
		$("#ts").text(total_score);
		$("#1year").text(surv_1.toFixed(2));
		$("#3year").text(surv_3.toFixed(2));
		
		$("#show").fadeIn(1000);
		
		
	});

	function temp_test(){
		var total_score = 0;
		items = document.getElementsByClassName("btn btn-default btn-primary active");
		for (var i = 0;i<items.length;i++){
			total_score += parseInt(items[i].value);
		}
		//#var total_score = parseFloat($("#age").val()) + parseFloat($("#tumorsize").val()) ;
		
		//total_score += parseFloat($("#age").val());
		//total_score += parseFloat($("#tumersize").val());
		return total_score;
	}
	function total(){
		var total_score = 0;
		items = document.getElementsByClassName("btn btn-default btn-primary active");
		for (var i = 0;i<items.length;i++){
			total_score += parseInt(items[i].value);
			console.log(items[i].innerHTML+":"+items[i].value);
		}
		
		var age_socre = parseFloat($("#age").val())*0.9126-0.1923;
		var tmsz_score = parseFloat($("#tumorsize").val())*1.9473+0.1143;
		total_score = total_score + age_socre + tmsz_score;
		
		console.log('AGE'+':'+ age_socre);
		console.log('TUMORSIZE'+':'+ tmsz_score);
		return total_score;
	}
	function OS1(ts){
		var beta0 = 7.87909;
		var beta1 = -0.030177;
		var OS = Math.exp(beta0 + beta1 * ts) / (1 + Math.exp(beta0 + beta1 * ts));
		return OS;
	}
	function OS3(ts){
		var beta0 = 5.71608;
		var beta1 = -0.030094;
		var OS = Math.exp(beta0 + beta1 * ts) / (1 + Math.exp(beta0 + beta1 * ts));
		return OS;
	}
});
  </script>

</body>
</html>